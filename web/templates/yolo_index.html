{% extends 'layout/basic.html' %}
{% load static %}

{% block title %} 图片识别 {% endblock %}

{% block css %}
    <style>
        img {
            width: 100%;
        }
    </style>
{% endblock %}

{% block content %}
    <div class="container">

        <div class="panel panel-default">
            <div class="panel-heading">
                <h3 class="panel-title">教室全览图</h3>
            </div>
            <div class="panel-body">
                <form action="{% url "upload_image" %}" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-group">
                        <label class="btn btn-default">
                            上传文件
                            <input type="file" name="image" style="display: none;">
                        </label>
                    </div>
                    <div class="form-group">
                        <input class="btn btn-primary" type="submit" value="确认">
                    </div>
                </form>
            </div>
        </div>

        {% if image_url %}
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">处理结果</h3>
                </div>
                <div class="panel-body">
                    <div class="form-group">
                        <p>教室中人数大约为: {{ count }}</p>
                    </div>
                    <div class="form-group">
                        <img src="{{ image_url }}" alt="Processed Image">
                    </div>
                </div>
            </div>
        {% endif %}

    </div>

{% endblock %}